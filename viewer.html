<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0b0b0b">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="stylesheet" href="./styles.css">
  <title>応援バット Viewer</title>
</head>
<body>
  <div class="phoneFrame">
    <div class="appShell">
      <header class="topBar">
        <div class="topBarTitle">応援バット</div>
        <div class="topBarSub" id="topBarSub">初回セットアップ</div>
      </header>

      <main class="main">
        <section class="screen" id="screen-setup" data-screen>
          <div class="card">
            <div class="cardTitle">セッション</div>
            <div class="cardText">PCと同じセッションコードにすると合図が届きます。</div>
            <input class="input" id="roomInput" inputmode="text" autocomplete="off" placeholder="例 demo">
            <div class="row rowBetween mt12">
              <div class="label">同期</div>
              <div class="value" id="syncStatus">未開始</div>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">デバイス接続</div>
            <div class="row rowBetween">
              <div>
                <div class="label">状態</div>
                <div class="value" id="devStatus">未接続</div>
              </div>
              <div>
                <div class="label">デバイス名</div>
                <div class="value" id="devName">ー</div>
              </div>
            </div>
            <div class="hint" id="bleHint"></div>
            <div class="row mt12">
              <button class="btn" id="btnConnect" type="button">接続</button>
              <button class="btn" id="btnDisconnect" type="button">切断</button>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">子どもプロフィール</div>
            <div class="grid2">
              <button class="pill" data-age="3" type="button">3才</button>
              <button class="pill" data-age="6" type="button">6才</button>
              <button class="pill" data-age="9" type="button">9才</button>
              <button class="pill" data-age="12" type="button">12才</button>
            </div>
            <div class="row rowBetween mt12">
              <div class="label">選択</div>
              <div class="value" id="ageValue">未選択</div>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">刺激の上限</div>
            <input class="range" id="intensityLimit" type="range" min="1" max="10" value="5">
            <div class="row rowBetween mt8">
              <div class="label">上限</div>
              <div class="value" id="intensityLimitValue">5</div>
            </div>
            <div class="hint">
              現状のファームはパターンIDのみなので、上限は「合図の頻度制御」に使います。
            </div>
          </div>

          <button class="btnPrimary" id="toPreGame" type="button">次へ</button>
        </section>

        <section class="screen hidden" id="screen-pregame" data-screen>
          <div class="card">
            <div class="cardTitle">試合選択</div>
            <select class="select" id="gameSelect">
              <option value="today-1">今日の試合 1</option>
              <option value="today-2">今日の試合 2</option>
              <option value="today-3">今日の試合 3</option>
            </select>
          </div>

          <div class="card">
            <div class="cardTitle">モード</div>
            <div class="grid2">
              <button class="pill" data-mode="family" type="button">親子モード</button>
              <button class="pill" data-mode="calm" type="button">おだやか</button>
              <button class="pill" data-mode="standard" type="button">標準</button>
              <button class="pill" data-mode="excite" type="button">盛り上げ</button>
            </div>
            <div class="row rowBetween mt12">
              <div class="label">選択</div>
              <div class="value" id="modeValue">未選択</div>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">ミッション</div>
            <div class="missionBox">
              <div class="missionHead">親</div>
              <div class="missionText" id="missionParent">未生成</div>
            </div>
            <div class="missionBox mt10">
              <div class="missionHead">子ども</div>
              <div class="missionText" id="missionChild">未生成</div>
            </div>
            <div class="row mt12">
              <button class="btn" id="btnGenMission" type="button">ミッション生成</button>
            </div>
          </div>

          <div class="row">
            <button class="btn" id="backToSetup" type="button">戻る</button>
            <button class="btnPrimary" id="startGame" type="button">開始</button>
          </div>
        </section>

        <section class="screen hidden" id="screen-live" data-screen>
          <div class="card">
            <div class="cardTitle">いまの状況</div>
            <div class="chips">
              <div class="chip" id="chipSide">攻守: ー</div>
              <div class="chip" id="chipDiff">点差: ー</div>
              <div class="chip" id="chipHype">盛り上がり: ー</div>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">いまの合図</div>
            <div class="bigValue" id="cueName">ー</div>
            <div class="smallMuted" id="cueShort">ー</div>
            <div class="hint">この合図はPC側から送られます。</div>
            <div class="row rowBetween mt12">
              <div class="label">最終更新</div>
              <div class="value" id="cueUpdated">ー</div>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">応援の蓄積</div>
            <div class="row rowBetween">
              <div>
                <div class="label">応援回数</div>
                <div class="value" id="hitCount">0</div>
                <div class="label mt12">直近1分</div>
                <div class="value" id="hitsPerMin">0</div>
                <div class="badge mt12 hidden" id="blazeBadge">燃焼中</div>
              </div>
              <div class="flameWrap">
                <div class="flame" id="flame"></div>
              </div>
            </div>
            <div class="row mt12">
              <button class="btn" id="btnNowWhat" type="button">いまなに？</button>
            </div>
          </div>

          <div class="row">
            <button class="btn" id="toTrouble" type="button">トラブル</button>
            <button class="btn" id="pauseToggle" type="button">一時停止</button>
            <button class="btn" id="muteToggle" type="button">静音</button>
          </div>

          <button class="btnPrimary" id="finishGame" type="button">観戦終了</button>
        </section>

        <section class="screen hidden" id="screen-nowwhat" data-screen>
          <div class="card">
            <div class="cardTitle">いまの合図の意味</div>
            <div class="bigValue" id="nowCueTitle">ー</div>
            <div class="cardText" id="nowCueMeaning">ー</div>
          </div>

          <div class="card">
            <div class="cardTitle">次にする行動</div>
            <div class="bigValue" id="nowCueAction">ー</div>
          </div>

          <div class="card">
            <div class="cardTitle">親が言いやすい一言</div>
            <div class="cardText" id="nowCuePhrase">ー</div>
          </div>

          <button class="btnPrimary" id="backToLive" type="button">戻る</button>
        </section>

        <section class="screen hidden" id="screen-trouble" data-screen>
          <div class="card">
            <div class="cardTitle">再接続</div>
            <div class="cardText">反応しない場合は切断して再接続します。</div>
            <div class="row mt12">
              <button class="btn" id="btnTroubleDisconnect" type="button">切断</button>
              <button class="btn" id="btnTroubleConnect" type="button">接続</button>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">安全停止</div>
            <div class="cardText">停止を送ってバットを止めます。</div>
            <div class="row mt12">
              <button class="btn" id="btnEmergencyStop" type="button">停止</button>
              <button class="btn" id="btnResume" type="button">再開</button>
            </div>
          </div>

          <button class="btnPrimary" id="backFromTrouble" type="button">戻る</button>
        </section>

        <section class="screen hidden" id="screen-post" data-screen>
          <div class="card">
            <div class="cardTitle">観戦後</div>
            <div class="grid2">
              <div class="stat">
                <div class="label">応援回数</div>
                <div class="value" id="postHits">0</div>
              </div>
              <div class="stat">
                <div class="label">合図回数</div>
                <div class="value" id="postCues">0</div>
              </div>
              <div class="stat">
                <div class="label">モード</div>
                <div class="value" id="postMode">ー</div>
              </div>
              <div class="stat">
                <div class="label">試合</div>
                <div class="value" id="postGame">ー</div>
              </div>
            </div>
            <div class="cardText mt12" id="postMessage">今日のがんばりを次回につなげよう。</div>
          </div>

          <div class="row">
            <button class="btn" id="postToPreGame" type="button">次の試合へ</button>
            <button class="btnPrimary" id="postToSetup" type="button">最初に戻る</button>
          </div>
        </section>
      </main>

      <footer class="footer">
        <div class="footerLine" id="footerLine">未接続</div>
      </footer>
    </div>
  </div>

  <script src="./viewer.js"></script>
</body>
</html>
